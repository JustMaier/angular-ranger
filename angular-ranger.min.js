function PointerDraw(e,n,t,r,a){function o(e){if(Object.keys)return Object.keys(e).length;var n=0;for(var t in e)++n;return n}function i(e){e.preventDefault&&e.preventDefault(),e.preventManipulation&&e.preventManipulation(),e.preventMouseEvent&&e.preventMouseEvent()}function u(e){for(var n=0,t=0,r=e;null!=r;r=r.offsetParent)navigator.userAgent.match(/\bMSIE\b/)&&(!document.documentMode||document.documentMode<8)&&"relative"==r.currentStyle.position&&r.offsetParent&&"relative"==r.offsetParent.currentStyle.position&&r.offsetLeft==r.offsetParent.offsetLeft?t+=r.offsetTop:(n+=r.offsetLeft,t+=r.offsetTop);return{x:n,y:t}}function m(n){if("undefined"==typeof n.pageX)if(n.pageX=n.offsetX+v.x,n.pageY=n.offsetY+v.y,n.srcElement.offsetParent==e&&document.documentMode&&8==document.documentMode&&"mousedown"==n.type)n.pageX+=n.srcElement.offsetLeft,n.pageY+=n.srcElement.offsetTop;else if(n.srcElement!=e&&!document.documentMode||document.documentMode<8){for(var t=-2,r=-2,a=n.srcElement;null!=a;a=a.parentNode)t+=a.scrollLeft?a.scrollLeft:0,r+=a.scrollTop?a.scrollTop:0;n.pageX=n.clientX+t,n.pageY=n.clientY+r}}function c(n){return Math.max(0,Math.min(n-v.x,e.offsetWidth))}function d(n){return Math.max(0,Math.min(n-v.y,e.offsetHeight))}function s(p){if("mousemove"!=p.type||0!=o(l)){i(p);for(var g=p.changedTouches?p.changedTouches:[p],h=0;h<g.length;++h){var x=g[h],X="undefined"!=typeof x.identifier?x.identifier:"undefined"!=typeof x.pointerId?x.pointerId:1;m(x);var w=x.pageX,y=x.pageY;p.type.match(/(start|down)$/i)?(v=u(e),l[X]&&(r&&r(e,X),delete l[X],a&&a("Ended draw on pointer "+X+" in "+p.type)),n&&n(e,X,c(w),d(y)),l[X]={x:w,y:y},e.msSetPointerCapture?e.msSetPointerCapture(X):"mousedown"==p.type&&1==o(l)&&(f?e.setCapture(!0):(document.addEventListener("mousemove",s,!1),document.addEventListener("mouseup",s,!1)))):p.type.match(/move$/i)?!l[X]||l[X].x==w&&l[X].y==y||(t&&t(e,X,c(w),d(y)),l[X].x=w,l[X].y=y):l[X]&&p.type.match(/(up|end|cancel)$/i)&&(r&&r(e,X),delete l[X],e.msReleasePointerCapture?e.msReleasePointerCapture(X):"mouseup"==p.type&&0==o(l)&&(f?e.releaseCapture():(document.removeEventListener("mousemove",s,!1),document.removeEventListener("mouseup",s,!1))))}}}var l={};a&&window.setInterval(function(){var e=!1,n="Current pointerId array contains:";for(var t in l)e=!0,n+=" "+t;e&&a(n)},1e3);var v=u(e),f=!1;window.navigator.msPointerEnabled?(e.addEventListener("MSPointerDown",s,!1),e.addEventListener("MSPointerMove",s,!1),e.addEventListener("MSPointerUp",s,!1),e.addEventListener("MSPointerCancel",s,!1),"undefined"!=typeof e.style.msContentZooming&&(e.style.msContentZooming="none"),"undefined"!=typeof e.style.msTouchAction&&(e.style.msTouchAction="none"),a&&a("Using Microsoft pointer model")):e.addEventListener?(e.addEventListener("touchstart",s,!1),e.addEventListener("touchmove",s,!1),e.addEventListener("touchend",s,!1),e.addEventListener("touchcancel",s,!1),e.addEventListener("mousedown",s,!1),e.setCapture&&!window.navigator.userAgent.match(/\bGecko\b/)&&(f=!0,e.addEventListener("mousemove",s,!1),e.addEventListener("mouseup",s,!1),a&&a("Using mouse model with capture"))):e.attachEvent&&e.setCapture?(f=!0,e.attachEvent("onmousedown",function(){return s(window.event),window.event.returnValue=!1,!1}),e.attachEvent("onmousemove",function(){return s(window.event),window.event.returnValue=!1,!1}),e.attachEvent("onmouseup",function(){return s(window.event),window.event.returnValue=!1,!1}),a&&a("Using legacy IE mode - mouse model with capture")):a&&a("Unexpected combination of supported features")}angular.module("angular-ranger",[]).directive("angularRanger",["$window",function(e){return{restrict:"E",replace:!0,templateUrl:"angular-ranger.html",scope:{min:"@",max:"@",step:"@",minValue:"=",maxValue:"="},link:function(n,t,r){function a(e){var n=Math.abs(e-currentX.min),t=Math.abs(e-currentX.max);return n==t?e<currentX.min?"min":"max":t>n?"min":"max"}function o(e,t){x=Math.abs(n.min-n.max),f(),v()}function i(e,n){w=parseFloat(e||1)}function u(e,n){disabled=e!==!1||"false"!==e}function m(){var e=moveX/X,t=e*x+parseFloat(n.min);return Math.round(t/w)*w}function c(){var e=m();n[moveTarget+"Value"]=e,currentX[moveTarget]=Math.abs(n.min-e)/x*p.clientWidth,n.$apply()}function d(){"min"==moveTarget&&moveX>currentX.max&&(moveX=currentX.max),"min"==moveTarget&&moveX<0&&(moveX=0),"max"==moveTarget&&moveX<currentX.min&&(moveX=currentX.min),"max"==moveTarget&&moveX>X&&(moveX=X)}function s(){moveX&&(d(),currentX[moveTarget]=moveX,g[moveTarget].attr("marker-value",m()),l())}function l(){g.min.css("left",currentX.min+"px"),g.max.css("left",currentX.max+"px"),h.css({left:currentX.min+"px",right:X-currentX.max+"px"})}function v(){f(),l()}function f(){X=p.clientWidth;var e=n.minValue||n.min||0,t=n.maxValue||n.max||0;currentX.min=Math.abs(n.min-e)/x*p.clientWidth,currentX.max=Math.abs(n.min-t)/x*p.clientWidth}var p=t[0].querySelector(".ranger-scale"),g={min:angular.element(p.children[0]),max:angular.element(p.children[2])},h=angular.element(p.children[1]),x=Math.abs(n.min-n.max),X=p.clientWidth,w=parseFloat(n.step)||1;currentX={min:0,max:p.clientWidth},moveX=null,moveTarget=null,disabled=!1,rAFIndex=null,angular.element(e).bind("resize",function(){f(),l(),n.$apply()}),n.$watch("min",o),n.$watch("max",o),n.$watch("minValue",v),n.$watch("maxValue",v),n.$watch("step",i),r.$observe("disabled",u),PointerDraw(p,function(e,n,t,r,o){disabled||(1>X&&(X=p.clientWidth),moveTarget=a(t),g[moveTarget][0].focus(),moveX=t,s())},function(e,n,t,r,a){disabled||(moveX=t,cancelAnimationFrame(rAFIndex),rAFIndex=requestAnimationFrame(s))},function(e,n,t){disabled||(g[moveTarget][0].blur(),d(),c(),cancelAnimationFrame(rAFIndex))})}}}]),angular.module("angular-ranger").run(["$templateCache",function(e){e.put("angular-ranger.html",'<div class="ranger">\r\n	<div class="ranger-scale">\r\n		<div class="ranger-marker" tabindex="0" marker-value="0"></div>\r\n		<div class="ranger-fill"></div>\r\n		<div class="ranger-marker" tabindex="0" marker-value="100"></div>\r\n	</div>\r\n</div>')}]);