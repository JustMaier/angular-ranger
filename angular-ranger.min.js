function PointerDraw(e,n,t,a,r){function i(e){if(Object.keys)return Object.keys(e).length;var n=0;for(var t in e)++n;return n}function o(e){e.preventDefault&&e.preventDefault(),e.preventManipulation&&e.preventManipulation(),e.preventMouseEvent&&e.preventMouseEvent()}function u(e){for(var n=0,t=0,a=e;null!=a;a=a.offsetParent)navigator.userAgent.match(/\bMSIE\b/)&&(!document.documentMode||document.documentMode<8)&&"relative"==a.currentStyle.position&&a.offsetParent&&"relative"==a.offsetParent.currentStyle.position&&a.offsetLeft==a.offsetParent.offsetLeft?t+=a.offsetTop:(n+=a.offsetLeft,t+=a.offsetTop);return{x:n,y:t}}function m(n){if("undefined"==typeof n.pageX)if(n.pageX=n.offsetX+f.x,n.pageY=n.offsetY+f.y,n.srcElement.offsetParent==e&&document.documentMode&&8==document.documentMode&&"mousedown"==n.type)n.pageX+=n.srcElement.offsetLeft,n.pageY+=n.srcElement.offsetTop;else if(n.srcElement!=e&&!document.documentMode||document.documentMode<8){for(var t=-2,a=-2,r=n.srcElement;null!=r;r=r.parentNode)t+=r.scrollLeft?r.scrollLeft:0,a+=r.scrollTop?r.scrollTop:0;n.pageX=n.clientX+t,n.pageY=n.clientY+a}}function s(n){return Math.max(0,Math.min(n-f.x,e.offsetWidth))}function l(n){return Math.max(0,Math.min(n-f.y,e.offsetHeight))}function c(p){if("mousemove"!=p.type||0!=i(d)){o(p);for(var h=p.changedTouches?p.changedTouches:[p],g=0;g<h.length;++g){var x=h[g],w="undefined"!=typeof x.identifier?x.identifier:"undefined"!=typeof x.pointerId?x.pointerId:1;m(x);var y=x.pageX,E=x.pageY;p.type.match(/(start|down)$/i)?(f=u(e),d[w]&&(a&&a(e,w),delete d[w],r&&r("Ended draw on pointer "+w+" in "+p.type)),n&&n(e,w,s(y),l(E)),d[w]={x:y,y:E},e.msSetPointerCapture?e.msSetPointerCapture(w):"mousedown"==p.type&&1==i(d)&&(v?e.setCapture(!0):(document.addEventListener("mousemove",c,!1),document.addEventListener("mouseup",c,!1)))):p.type.match(/move$/i)?!d[w]||d[w].x==y&&d[w].y==E||(t&&t(e,w,s(y),l(E)),d[w].x=y,d[w].y=E):d[w]&&p.type.match(/(up|end|cancel)$/i)&&(a&&a(e,w),delete d[w],e.msReleasePointerCapture?e.msReleasePointerCapture(w):"mouseup"==p.type&&0==i(d)&&(v?e.releaseCapture():(document.removeEventListener("mousemove",c,!1),document.removeEventListener("mouseup",c,!1))))}}}var d={};r&&window.setInterval(function(){var e=!1,n="Current pointerId array contains:";for(var t in d)e=!0,n+=" "+t;e&&r(n)},1e3);var f=u(e),v=!1;window.navigator.msPointerEnabled?(e.addEventListener("MSPointerDown",c,!1),e.addEventListener("MSPointerMove",c,!1),e.addEventListener("MSPointerUp",c,!1),e.addEventListener("MSPointerCancel",c,!1),"undefined"!=typeof e.style.msContentZooming&&(e.style.msContentZooming="none"),"undefined"!=typeof e.style.msTouchAction&&(e.style.msTouchAction="none"),r&&r("Using Microsoft pointer model")):e.addEventListener?(e.addEventListener("touchstart",c,!1),e.addEventListener("touchmove",c,!1),e.addEventListener("touchend",c,!1),e.addEventListener("touchcancel",c,!1),e.addEventListener("mousedown",c,!1),e.setCapture&&!window.navigator.userAgent.match(/\bGecko\b/)&&(v=!0,e.addEventListener("mousemove",c,!1),e.addEventListener("mouseup",c,!1),r&&r("Using mouse model with capture"))):e.attachEvent&&e.setCapture?(v=!0,e.attachEvent("onmousedown",function(){return c(window.event),window.event.returnValue=!1,!1}),e.attachEvent("onmousemove",function(){return c(window.event),window.event.returnValue=!1,!1}),e.attachEvent("onmouseup",function(){return c(window.event),window.event.returnValue=!1,!1}),r&&r("Using legacy IE mode - mouse model with capture")):r&&r("Unexpected combination of supported features")}angular.module("angular-ranger",[]).directive("angularRanger",["$window",function(e){return{restrict:"E",replace:!0,templateUrl:"angular-ranger.html",scope:{min:"@",max:"@",step:"@",minValue:"=?",maxValue:"=?",value:"=?"},link:function(n,t,a){function r(e){if(L)return"max";var n=Math.abs(e-b.min),t=Math.abs(e-b.max);return n==t?e<b.min?"min":"max":t>n?"min":"max"}function i(e,t){y=Math.abs(n.min-n.max),p(),v()}function o(e,n){M=parseFloat(e||1)}function u(e,n){C=e!==!1||"false"!==e}function m(){var e=P/E,t=e*y+parseFloat(n.min);return Math.round(t/M)*M}function s(){var e=m();n[V+"Value"]=e,L&&(n.value=e),b[V]=Math.abs(n.min-e)/y*g.clientWidth,n.$apply()}function l(){"min"==V&&P>b.max&&(P=b.max),"min"==V&&0>P&&(P=0),"max"==V&&P<b.min&&(P=b.min),"max"==V&&P>E&&(P=E)}function c(){P&&(l(),b[V]=P,x[V].attr("marker-value",m()),d())}function d(){null!=V&&null!=x[V]&&(x[V].css("left",b[V]+"px"),"min"==V?w.css("left",b.min+"px"):w.css("right",E-b.max+"px"))}function f(){var e={min:Math.abs(n.min-(L?0:n.minValue))/y*100,max:Math.abs(n.min-n.maxValue)/y*100};x.min.css("left",e.min+"%"),x.max.css("left",e.max+"%"),w.css({left:e.min+"%",right:100-e.max+"%"})}function v(){h(),p(),f()}function p(){E=g.clientWidth;var e=n.minValue||n.min||0,t=n.maxValue||n.max||0;b.min=Math.abs(n.min-e)/y*g.clientWidth,b.max=Math.abs(n.min-t)/y*g.clientWidth}function h(){L=null==n.minValue,x.min.css("display",L?"none":"block")}var g=t[0].querySelector(".ranger-scale"),x={min:angular.element(g.children[0]),max:angular.element(g.children[2])},w=angular.element(g.children[1]),y=Math.abs(n.min-n.max),E=g.clientWidth,M=parseFloat(n.step)||1,b={min:0,max:g.clientWidth},L=null==n.minValue,P=null,V=null,C=!1,$=null;L&&(n.maxValue=n.value),angular.element(e).bind("resize",function(){p(),d(),n.$apply()}),n.$watch("min",i),n.$watch("max",i),n.$watch("minValue",v),n.$watch("maxValue",v),n.$watch("step",o),a.$observe("disabled",u),PointerDraw(g,function(e,n,t,a,i){C||(1>E&&p(),V=r(t),x[V][0].focus(),P=t,c())},function(e,n,t,a,r){C||(P=t,cancelAnimationFrame($),$=requestAnimationFrame(c))},function(e,n,t){C||(x[V][0].blur(),l(),s(),cancelAnimationFrame($))})}}}]),angular.module("angular-ranger").run(["$templateCache",function(e){e.put("angular-ranger.html",'<div class="ranger">\r\n	<div class="ranger-scale">\r\n		<div class="ranger-marker" tabindex="0" marker-value="0"></div>\r\n		<div class="ranger-fill"></div>\r\n		<div class="ranger-marker" tabindex="0" marker-value="100"></div>\r\n	</div>\r\n</div>')}]);