function PointerDraw(e,n,t,a,r){function o(e){if(Object.keys)return Object.keys(e).length;var n=0;for(var t in e)++n;return n}function i(e){e.preventDefault&&e.preventDefault(),e.preventManipulation&&e.preventManipulation(),e.preventMouseEvent&&e.preventMouseEvent()}function u(e){for(var n=0,t=0,a=e;null!=a;a=a.offsetParent)navigator.userAgent.match(/\bMSIE\b/)&&(!document.documentMode||document.documentMode<8)&&"relative"==a.currentStyle.position&&a.offsetParent&&"relative"==a.offsetParent.currentStyle.position&&a.offsetLeft==a.offsetParent.offsetLeft?t+=a.offsetTop:(n+=a.offsetLeft,t+=a.offsetTop);return{x:n,y:t}}function m(n){if("undefined"==typeof n.pageX)if(n.pageX=n.offsetX+f.x,n.pageY=n.offsetY+f.y,n.srcElement.offsetParent==e&&document.documentMode&&8==document.documentMode&&"mousedown"==n.type)n.pageX+=n.srcElement.offsetLeft,n.pageY+=n.srcElement.offsetTop;else if(n.srcElement!=e&&!document.documentMode||document.documentMode<8){for(var t=-2,a=-2,r=n.srcElement;null!=r;r=r.parentNode)t+=r.scrollLeft?r.scrollLeft:0,a+=r.scrollTop?r.scrollTop:0;n.pageX=n.clientX+t,n.pageY=n.clientY+a}}function s(n){return Math.max(0,Math.min(n-f.x,e.offsetWidth))}function c(n){return Math.max(0,Math.min(n-f.y,e.offsetHeight))}function l(p){if("mousemove"!=p.type||0!=o(d)){i(p);for(var h=p.changedTouches?p.changedTouches:[p],g=0;g<h.length;++g){var x=h[g],w="undefined"!=typeof x.identifier?x.identifier:"undefined"!=typeof x.pointerId?x.pointerId:1;m(x);var y=x.pageX,E=x.pageY;p.type.match(/(start|down)$/i)?(f=u(e),d[w]&&(a&&a(e,w),delete d[w],r&&r("Ended draw on pointer "+w+" in "+p.type)),n&&n(e,w,s(y),c(E)),d[w]={x:y,y:E},e.msSetPointerCapture?e.msSetPointerCapture(w):"mousedown"==p.type&&1==o(d)&&(v?e.setCapture(!0):(document.addEventListener("mousemove",l,!1),document.addEventListener("mouseup",l,!1)))):p.type.match(/move$/i)?!d[w]||d[w].x==y&&d[w].y==E||(t&&t(e,w,s(y),c(E)),d[w].x=y,d[w].y=E):d[w]&&p.type.match(/(up|end|cancel)$/i)&&(a&&a(e,w),delete d[w],e.msReleasePointerCapture?e.msReleasePointerCapture(w):"mouseup"==p.type&&0==o(d)&&(v?e.releaseCapture():(document.removeEventListener("mousemove",l,!1),document.removeEventListener("mouseup",l,!1))))}}}var d={};r&&window.setInterval(function(){var e=!1,n="Current pointerId array contains:";for(var t in d)e=!0,n+=" "+t;e&&r(n)},1e3);var f=u(e),v=!1;window.navigator.msPointerEnabled?(e.addEventListener("MSPointerDown",l,!1),e.addEventListener("MSPointerMove",l,!1),e.addEventListener("MSPointerUp",l,!1),e.addEventListener("MSPointerCancel",l,!1),"undefined"!=typeof e.style.msContentZooming&&(e.style.msContentZooming="none"),"undefined"!=typeof e.style.msTouchAction&&(e.style.msTouchAction="none"),r&&r("Using Microsoft pointer model")):e.addEventListener?(e.addEventListener("touchstart",l,!1),e.addEventListener("touchmove",l,!1),e.addEventListener("touchend",l,!1),e.addEventListener("touchcancel",l,!1),e.addEventListener("mousedown",l,!1),e.setCapture&&!window.navigator.userAgent.match(/\bGecko\b/)&&(v=!0,e.addEventListener("mousemove",l,!1),e.addEventListener("mouseup",l,!1),r&&r("Using mouse model with capture"))):e.attachEvent&&e.setCapture?(v=!0,e.attachEvent("onmousedown",function(){return l(window.event),window.event.returnValue=!1,!1}),e.attachEvent("onmousemove",function(){return l(window.event),window.event.returnValue=!1,!1}),e.attachEvent("onmouseup",function(){return l(window.event),window.event.returnValue=!1,!1}),r&&r("Using legacy IE mode - mouse model with capture")):r&&r("Unexpected combination of supported features")}angular.module("angular-ranger",[]).directive("angularRanger",["$window",function(e){return{restrict:"E",replace:!0,templateUrl:"angular-ranger.html",scope:{min:"@",max:"@",step:"@",minValue:"=",maxValue:"="},link:function(n,t,a){function r(e){var n=Math.abs(e-M.min),t=Math.abs(e-M.max);return n==t?e<M.min?"min":"max":t>n?"min":"max"}function o(e,t){w=Math.abs(n.min-n.max),p(),v()}function i(e,n){E=parseFloat(e||1)}function u(e,n){P=e!==!1||"false"!==e}function m(){var e=b/y,t=e*w+parseFloat(n.min);return Math.round(t/E)*E}function s(){var e=m();n[L+"Value"]=e,M[L]=Math.abs(n.min-e)/w*h.clientWidth,n.$apply()}function c(){"min"==L&&b>M.max&&(b=M.max),"min"==L&&0>b&&(b=0),"max"==L&&b<M.min&&(b=M.min),"max"==L&&b>y&&(b=y)}function l(){b&&(c(),M[L]=b,g[L].attr("marker-value",m()),d())}function d(){null!=L&&null!=g[L]&&(g[L].css("left",M[L]+"px"),"min"==L?x.css("left",M.min+"px"):x.css("right",y-M.max+"px"))}function f(){var e={min:Math.abs(n.min-n.minValue)/w*100,max:Math.abs(n.min-n.maxValue)/w*100};g.min.css("left",e.min+"%"),g.max.css("left",e.max+"%"),x.css({left:e.min+"%",right:100-e.max+"%"})}function v(){p(),f()}function p(){y=h.clientWidth;var e=n.minValue||n.min||0,t=n.maxValue||n.max||0;M.min=Math.abs(n.min-e)/w*h.clientWidth,M.max=Math.abs(n.min-t)/w*h.clientWidth}var h=t[0].querySelector(".ranger-scale"),g={min:angular.element(h.children[0]),max:angular.element(h.children[2])},x=angular.element(h.children[1]),w=Math.abs(n.min-n.max),y=h.clientWidth,E=parseFloat(n.step)||1,M={min:0,max:h.clientWidth},b=null,L=null,P=!1,C=null;angular.element(e).bind("resize",function(){p(),d(),n.$apply()}),n.$watch("min",o),n.$watch("max",o),n.$watch("minValue",v),n.$watch("maxValue",v),n.$watch("step",i),a.$observe("disabled",u),PointerDraw(h,function(e,n,t,a,o){P||(1>y&&p(),L=r(t),g[L][0].focus(),b=t,l())},function(e,n,t,a,r){P||(b=t,cancelAnimationFrame(C),C=requestAnimationFrame(l))},function(e,n,t){P||(g[L][0].blur(),c(),s(),cancelAnimationFrame(C))})}}}]),angular.module("angular-ranger").run(["$templateCache",function(e){e.put("angular-ranger.html",'<div class="ranger">\r\n	<div class="ranger-scale">\r\n		<div class="ranger-marker" tabindex="0" marker-value="0"></div>\r\n		<div class="ranger-fill"></div>\r\n		<div class="ranger-marker" tabindex="0" marker-value="100"></div>\r\n	</div>\r\n</div>')}]);