function PointerDraw(e,n,t,a,r){function o(e){if(Object.keys)return Object.keys(e).length;var n=0;for(var t in e)++n;return n}function i(e){e.preventDefault&&e.preventDefault(),e.preventManipulation&&e.preventManipulation(),e.preventMouseEvent&&e.preventMouseEvent()}function u(e){for(var n=0,t=0,a=e;null!=a;a=a.offsetParent)navigator.userAgent.match(/\bMSIE\b/)&&(!document.documentMode||document.documentMode<8)&&"relative"==a.currentStyle.position&&a.offsetParent&&"relative"==a.offsetParent.currentStyle.position&&a.offsetLeft==a.offsetParent.offsetLeft?t+=a.offsetTop:(n+=a.offsetLeft,t+=a.offsetTop);return{x:n,y:t}}function m(n){if("undefined"==typeof n.pageX)if(n.pageX=n.offsetX+f.x,n.pageY=n.offsetY+f.y,n.srcElement.offsetParent==e&&document.documentMode&&8==document.documentMode&&"mousedown"==n.type)n.pageX+=n.srcElement.offsetLeft,n.pageY+=n.srcElement.offsetTop;else if(n.srcElement!=e&&!document.documentMode||document.documentMode<8){for(var t=-2,a=-2,r=n.srcElement;null!=r;r=r.parentNode)t+=r.scrollLeft?r.scrollLeft:0,a+=r.scrollTop?r.scrollTop:0;n.pageX=n.clientX+t,n.pageY=n.clientY+a}}function s(n){return Math.max(0,Math.min(n-f.x,e.offsetWidth))}function c(n){return Math.max(0,Math.min(n-f.y,e.offsetHeight))}function d(v){if("mousemove"!=v.type||0!=o(l)){i(v);for(var h=v.changedTouches?v.changedTouches:[v],g=0;g<h.length;++g){var w=h[g],x="undefined"!=typeof w.identifier?w.identifier:"undefined"!=typeof w.pointerId?w.pointerId:1;m(w);var y=w.pageX,E=w.pageY;v.type.match(/(start|down)$/i)?(f=u(e),l[x]&&(a&&a(e,x),delete l[x],r&&r("Ended draw on pointer "+x+" in "+v.type)),n&&n(e,x,s(y),c(E)),l[x]={x:y,y:E},e.msSetPointerCapture?e.msSetPointerCapture(x):"mousedown"==v.type&&1==o(l)&&(p?e.setCapture(!0):(document.addEventListener("mousemove",d,!1),document.addEventListener("mouseup",d,!1)))):v.type.match(/move$/i)?!l[x]||l[x].x==y&&l[x].y==E||(t&&t(e,x,s(y),c(E)),l[x].x=y,l[x].y=E):l[x]&&v.type.match(/(up|end|cancel)$/i)&&(a&&a(e,x),delete l[x],e.msReleasePointerCapture?e.msReleasePointerCapture(x):"mouseup"==v.type&&0==o(l)&&(p?e.releaseCapture():(document.removeEventListener("mousemove",d,!1),document.removeEventListener("mouseup",d,!1))))}}}var l={};r&&window.setInterval(function(){var e=!1,n="Current pointerId array contains:";for(var t in l)e=!0,n+=" "+t;e&&r(n)},1e3);var f=u(e),p=!1;window.navigator.msPointerEnabled?(e.addEventListener("MSPointerDown",d,!1),e.addEventListener("MSPointerMove",d,!1),e.addEventListener("MSPointerUp",d,!1),e.addEventListener("MSPointerCancel",d,!1),"undefined"!=typeof e.style.msContentZooming&&(e.style.msContentZooming="none"),"undefined"!=typeof e.style.msTouchAction&&(e.style.msTouchAction="none"),r&&r("Using Microsoft pointer model")):e.addEventListener?(e.addEventListener("touchstart",d,!1),e.addEventListener("touchmove",d,!1),e.addEventListener("touchend",d,!1),e.addEventListener("touchcancel",d,!1),e.addEventListener("mousedown",d,!1),e.setCapture&&!window.navigator.userAgent.match(/\bGecko\b/)&&(p=!0,e.addEventListener("mousemove",d,!1),e.addEventListener("mouseup",d,!1),r&&r("Using mouse model with capture"))):e.attachEvent&&e.setCapture?(p=!0,e.attachEvent("onmousedown",function(){return d(window.event),window.event.returnValue=!1,!1}),e.attachEvent("onmousemove",function(){return d(window.event),window.event.returnValue=!1,!1}),e.attachEvent("onmouseup",function(){return d(window.event),window.event.returnValue=!1,!1}),r&&r("Using legacy IE mode - mouse model with capture")):r&&r("Unexpected combination of supported features")}angular.module("angular-ranger",[]).directive("angularRanger",["$window",function(e){return{restrict:"E",replace:!0,templateUrl:"angular-ranger.html",scope:{min:"@",max:"@",step:"@",minValue:"=",maxValue:"="},link:function(n,t,a){function r(e){var n=Math.abs(e-E.min),t=Math.abs(e-E.max);return n==t?e<E.min?"min":"max":t>n?"min":"max"}function o(e,t){w=Math.abs(n.min-n.max),p(),f()}function i(e,n){y=parseFloat(e||1)}function u(e,n){b=e!==!1||"false"!==e}function m(){var e=M/x,t=e*w+parseFloat(n.min);return Math.round(t/y)*y}function s(){var e=m();n[L+"Value"]=e,E[L]=Math.abs(n.min-e)/w*v.clientWidth,n.$apply()}function c(){"min"==L&&M>E.max&&(M=E.max),"min"==L&&0>M&&(M=0),"max"==L&&M<E.min&&(M=E.min),"max"==L&&M>x&&(M=x)}function d(){M&&(c(),E[L]=M,h[L].attr("marker-value",m()),l())}function l(){h.min.css("left",E.min+"px"),h.max.css("left",E.max+"px"),g.css({left:E.min+"px",right:x-E.max+"px"})}function f(){p(),l()}function p(){x=v.clientWidth;var e=n.minValue||n.min||0,t=n.maxValue||n.max||0;E.min=Math.abs(n.min-e)/w*v.clientWidth,E.max=Math.abs(n.min-t)/w*v.clientWidth}var v=t[0].querySelector(".ranger-scale"),h={min:angular.element(v.children[0]),max:angular.element(v.children[2])},g=angular.element(v.children[1]),w=Math.abs(n.min-n.max),x=v.clientWidth,y=parseFloat(n.step)||1,E={min:0,max:v.clientWidth},M=null,L=null,b=!1,P=null;angular.element(e).bind("resize",function(){p(),l(),n.$apply()}),n.$watch("min",o),n.$watch("max",o),n.$watch("minValue",f),n.$watch("maxValue",f),n.$watch("step",i),a.$observe("disabled",u),PointerDraw(v,function(e,n,t,a,o){b||(1>x&&(x=v.clientWidth),L=r(t),h[L][0].focus(),M=t,d())},function(e,n,t,a,r){b||(M=t,cancelAnimationFrame(P),P=requestAnimationFrame(d))},function(e,n,t){b||(h[L][0].blur(),c(),s(),cancelAnimationFrame(P))})}}}]),angular.module("angular-ranger").run(["$templateCache",function(e){e.put("angular-ranger.html",'<div class="ranger">\r\n	<div class="ranger-scale">\r\n		<div class="ranger-marker" tabindex="0" marker-value="0"></div>\r\n		<div class="ranger-fill"></div>\r\n		<div class="ranger-marker" tabindex="0" marker-value="100"></div>\r\n	</div>\r\n</div>')}]);